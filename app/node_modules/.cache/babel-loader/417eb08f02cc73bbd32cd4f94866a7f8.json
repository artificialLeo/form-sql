{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\WP\\\\Desktop\\\\step-photos\\\\app\\\\src\\\\components\\\\Modal\\\\components\\\\CommentsBlock\\\\CommentsBlock.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useEffect, useRef, useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport clsx from 'clsx';\nimport Collapse from '@material-ui/core/Collapse';\nimport { red } from '@material-ui/core/colors';\nimport FavoriteIcon from '@material-ui/icons/Favorite';\nimport ShareIcon from '@material-ui/icons/Share';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport Paper from '@material-ui/core/Paper';\nimport InputBase from '@material-ui/core/InputBase';\nimport Divider from '@material-ui/core/Divider';\nimport AddComment from '@material-ui/icons/AddComment';\nimport InsertEmoticon from '@material-ui/icons/InsertEmoticon';\nimport AddBox from '@material-ui/icons/AddBox';\nimport Alert from '@material-ui/lab/Alert';\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst useStyles1 = makeStyles(theme => ({\n  root: {\n    maxWidth: '100%',\n    borderTop: '1px solid white',\n    borderRadius: '0'\n  },\n  media: {\n    height: 0,\n    paddingTop: '56.25%' // 16:9\n\n  },\n  expand: {\n    transform: 'rotate(0deg)',\n    marginLeft: 'auto',\n    transition: theme.transitions.create('transform', {\n      duration: theme.transitions.duration.shortest\n    })\n  },\n  expandOpen: {\n    transform: 'rotate(180deg)'\n  },\n  avatar: {\n    backgroundColor: red[500]\n  },\n  reverse: {\n    display: 'flex',\n    flexDirection: 'column-reverse'\n  },\n  comsCaption: {\n    fontWeight: 'bold',\n    marginLeft: '20px',\n    marginBottom: '0px',\n    color: '#7090ff'\n  }\n}));\n\nconst CommentsBlock = ({\n  likes,\n  coms,\n  ids,\n  currentUser,\n  currentUserEmail\n}) => {\n  _s();\n\n  const classes = useStyles1();\n  const [expanded, setExpanded] = useState(false);\n  const [like, setLike] = useState('false');\n  let [numberOfLikes, setNumberOfLikes] = useState(likes.length);\n  useEffect(() => {\n    if (likes.includes(currentUserEmail)) {\n      setLike('true');\n    }\n  }, []);\n\n  const handleExpandClick = () => {\n    setExpanded(!expanded);\n  };\n\n  const renderComment = (author, text, i) => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        alignItems: \"center\",\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h5\",\n          style: {\n            fontWeight: 'bold'\n          },\n          children: [author, \":\\xA0\\xA0\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h5\",\n          children: text\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this)]\n    }, i, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this);\n  };\n\n  const likePost = () => {\n    if (like === 'false') {\n      setLike('true');\n      setNumberOfLikes(++numberOfLikes);\n      axios.post(\"http://localhost:4000/api/like\", {\n        params: {\n          id: ids,\n          mail: currentUserEmail,\n          liked: 'false',\n          user: window.location.pathname.split(\"/\").slice(2)[0]\n        }\n      });\n    } else {\n      setLike('false');\n      setNumberOfLikes(--numberOfLikes);\n      axios.put(\"http://localhost:4000/api/removelike\", {\n        params: {\n          id: ids,\n          mail: currentUserEmail,\n          liked: 'true',\n          user: window.location.pathname.split(\"/\").slice(2)[0]\n        }\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Card, {\n    className: classes.root,\n    children: [/*#__PURE__*/_jsxDEV(CardContent, {\n      children: /*#__PURE__*/_jsxDEV(CustomizedInputBase, {\n        ids: ids,\n        authorizedUserMail: currentUser\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(CardActions, {\n      disableSpacing: true,\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        alignItems: \"center\",\n        children: [/*#__PURE__*/_jsxDEV(IconButton, {\n          \"aria-label\": \"like\",\n          onClick: likePost,\n          children: /*#__PURE__*/_jsxDEV(FavoriteIcon, {\n            color: like === 'true' ? 'secondary' : 'primary'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h5\",\n          children: numberOfLikes\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n        className: clsx(classes.expand, {\n          [classes.expandOpen]: expanded\n        }),\n        onClick: handleExpandClick,\n        \"aria-expanded\": expanded,\n        \"aria-label\": \"show more\",\n        children: /*#__PURE__*/_jsxDEV(ExpandMoreIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Collapse, {\n      in: expanded,\n      timeout: \"auto\",\n      unmountOnExit: true,\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h5\",\n        paragraph: true,\n        className: classes.comsCaption,\n        children: \"Comments:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n        className: classes.reverse,\n        children: coms.map((item, i) => renderComment(item.author, item.text, i))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 105,\n    columnNumber: 9\n  }, this);\n};\n\n_s(CommentsBlock, \"8ocSUIR4ITV0dAicIoFOb6CjC34=\", false, function () {\n  return [useStyles1];\n});\n\n_c = CommentsBlock;\nexport default CommentsBlock;\nconst useStyles2 = makeStyles(theme => ({\n  root: {\n    display: 'flex',\n    alignItems: 'center',\n    maxWidth: '100%'\n  },\n  input: {\n    marginLeft: theme.spacing(1),\n    flex: 1\n  },\n  iconButton: {\n    padding: 10\n  },\n  divider: {\n    height: 28,\n    margin: 4\n  }\n}));\n\nconst CustomizedInputBase = ({\n  ids,\n  authorizedUserMail\n}) => {\n  _s2();\n\n  const classes = useStyles2();\n  const valuePost = useRef(null);\n  const [textValue, setTextValue] = useState('');\n  const [alertShown, setAlertShown] = useState(false);\n\n  const sendValue = e => {\n    setTextValue(e.target.value);\n  };\n\n  const toggleAlert = e => {\n    setAlertShown(true);\n    setTimeout(setAlertShown, 1500, false);\n  };\n\n  const addComment = id => {\n    if (textValue.length !== 0) {\n      axios.post(\"http://localhost:4000/api/comments\", {\n        params: {\n          id: id,\n          mail: window.location.pathname.split(\"/\").slice(2)[0],\n          userName: authorizedUserMail,\n          userText: textValue\n        }\n      }).then(response => {\n        valuePost.current.value = '';\n        setTextValue('');\n        toggleAlert(); // axios.put(\"http://localhost:4000/api/newcomment/\", //working. but bad project structure\n        //     {params: {mail: window.location.pathname.split(\"/\").slice(2)[0], id: id}})\n        //     .then(response => {\n        //         let temp = response.data.posts.find(item => item.postComId === id).comments;\n        //\n        //         setCommentsList(temp)\n        //     });\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [alertShown && /*#__PURE__*/_jsxDEV(Alert, {\n      severity: \"success\",\n      children: \"Successfully added reload and check it out!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 24\n    }, this), /*#__PURE__*/_jsxDEV(Paper, {\n      component: \"form\",\n      className: classes.root,\n      children: [/*#__PURE__*/_jsxDEV(IconButton, {\n        disabled: true,\n        className: classes.iconButton,\n        \"aria-label\": \"menu\",\n        children: /*#__PURE__*/_jsxDEV(AddComment, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(InputBase, {\n        innerRef: valuePost,\n        value: textValue,\n        onChange: sendValue,\n        className: classes.input,\n        placeholder: \"Add Your Comment\",\n        inputProps: {\n          'aria-label': 'Add'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n        disabled: true,\n        type: \"button\",\n        className: classes.iconButton,\n        \"aria-label\": \"search\",\n        children: /*#__PURE__*/_jsxDEV(InsertEmoticon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Divider, {\n        className: classes.divider,\n        orientation: \"vertical\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n        color: \"primary\",\n        className: classes.iconButton,\n        \"aria-label\": \"AddBox\",\n        onClick: addComment.bind(this, ids),\n        children: /*#__PURE__*/_jsxDEV(AddBox, {\n          style: {\n            color: 'green'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 202,\n    columnNumber: 9\n  }, this);\n};\n\n_s2(CustomizedInputBase, \"8Txkt7dRnq3PlHNFu4W5f4BC5xE=\", false, function () {\n  return [useStyles2];\n});\n\n_c2 = CustomizedInputBase;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"CommentsBlock\");\n$RefreshReg$(_c2, \"CustomizedInputBase\");","map":{"version":3,"sources":["C:/Users/WP/Desktop/step-photos/app/src/components/Modal/components/CommentsBlock/CommentsBlock.js"],"names":["React","useEffect","useRef","useState","makeStyles","Card","CardActions","CardContent","Grid","Typography","IconButton","clsx","Collapse","red","FavoriteIcon","ShareIcon","ExpandMoreIcon","Paper","InputBase","Divider","AddComment","InsertEmoticon","AddBox","Alert","axios","useStyles1","theme","root","maxWidth","borderTop","borderRadius","media","height","paddingTop","expand","transform","marginLeft","transition","transitions","create","duration","shortest","expandOpen","avatar","backgroundColor","reverse","display","flexDirection","comsCaption","fontWeight","marginBottom","color","CommentsBlock","likes","coms","ids","currentUser","currentUserEmail","classes","expanded","setExpanded","like","setLike","numberOfLikes","setNumberOfLikes","length","includes","handleExpandClick","renderComment","author","text","i","likePost","post","params","id","mail","liked","user","window","location","pathname","split","slice","put","map","item","useStyles2","alignItems","input","spacing","flex","iconButton","padding","divider","margin","CustomizedInputBase","authorizedUserMail","valuePost","textValue","setTextValue","alertShown","setAlertShown","sendValue","e","target","value","toggleAlert","setTimeout","addComment","userName","userText","then","response","current","bind"],"mappings":"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","sourcesContent":["import React, {useEffect, useRef, useState} from 'react';\r\n\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport clsx from 'clsx';\r\nimport Collapse from '@material-ui/core/Collapse';\r\nimport { red } from '@material-ui/core/colors';\r\nimport FavoriteIcon from '@material-ui/icons/Favorite';\r\nimport ShareIcon from '@material-ui/icons/Share';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport InputBase from '@material-ui/core/InputBase';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport AddComment from '@material-ui/icons/AddComment';\r\nimport InsertEmoticon from '@material-ui/icons/InsertEmoticon';\r\nimport AddBox from '@material-ui/icons/AddBox';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport axios from \"axios\";\r\n\r\nconst useStyles1 = makeStyles((theme) => ({\r\n    root: {\r\n        maxWidth: '100%',\r\n        borderTop: '1px solid white',\r\n        borderRadius: '0'\r\n    },\r\n    media: {\r\n        height: 0,\r\n        paddingTop: '56.25%', // 16:9\r\n    },\r\n    expand: {\r\n        transform: 'rotate(0deg)',\r\n        marginLeft: 'auto',\r\n        transition: theme.transitions.create('transform', {\r\n            duration: theme.transitions.duration.shortest,\r\n        }),\r\n    },\r\n    expandOpen: {\r\n        transform: 'rotate(180deg)',\r\n    },\r\n    avatar: {\r\n        backgroundColor: red[500],\r\n    },\r\n    reverse: {\r\n        display: 'flex',\r\n        flexDirection: 'column-reverse'\r\n    },\r\n    comsCaption: {\r\n        fontWeight: 'bold',\r\n        marginLeft: '20px',\r\n        marginBottom: '0px',\r\n        color: '#7090ff'\r\n    }\r\n}));\r\n\r\nconst CommentsBlock = ({likes, coms, ids, currentUser, currentUserEmail}) => {\r\n    const classes = useStyles1();\r\n    const [expanded, setExpanded] = useState(false);\r\n    const [like, setLike] = useState('false');\r\n    let [numberOfLikes, setNumberOfLikes] = useState(likes.length);\r\n\r\n    useEffect(() => {\r\n        if (likes.includes(currentUserEmail)) {\r\n            setLike('true');\r\n        }\r\n    }, []);\r\n\r\n    const handleExpandClick = () => {\r\n        setExpanded(!expanded);\r\n    };\r\n\r\n    const renderComment = (author, text, i) => {\r\n        return (\r\n            <div key={i}>\r\n                <Grid container alignItems=\"center\" >\r\n                    <Typography variant=\"h5\" style={{fontWeight: 'bold'}} >{author}:&nbsp;&nbsp;</Typography>\r\n                    <Typography variant=\"h5\" >{text}</Typography>\r\n                </Grid>\r\n                <hr/>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    const likePost = () => {\r\n\r\n        if (like === 'false') {\r\n            setLike('true');\r\n            setNumberOfLikes(++numberOfLikes);\r\n            axios.post(\"http://localhost:4000/api/like\", {\r\n                params: { id: ids, mail: currentUserEmail, liked: 'false', user: window.location.pathname.split(\"/\").slice(2)[0] }});\r\n        } else {\r\n            setLike('false');\r\n            setNumberOfLikes(--numberOfLikes);\r\n            axios.put(\"http://localhost:4000/api/removelike\", {\r\n                params: { id: ids, mail: currentUserEmail, liked: 'true', user: window.location.pathname.split(\"/\").slice(2)[0] }});\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Card className={classes.root}>\r\n            <CardContent>\r\n                <CustomizedInputBase ids={ids} authorizedUserMail={currentUser}/>\r\n            </CardContent>\r\n            <CardActions disableSpacing>\r\n\r\n                <Grid container alignItems=\"center\">\r\n                    <IconButton aria-label=\"like\" onClick={likePost}>\r\n                        <FavoriteIcon color={ like === 'true' ? 'secondary' : 'primary' } />\r\n                    </IconButton>\r\n                    <Typography variant=\"h5\">{numberOfLikes}</Typography>\r\n                </Grid>\r\n\r\n                <IconButton\r\n                    className={clsx(classes.expand, {\r\n                        [classes.expandOpen]: expanded,\r\n                    })}\r\n                    onClick={handleExpandClick}\r\n                    aria-expanded={expanded}\r\n                    aria-label=\"show more\"\r\n                >\r\n                    <ExpandMoreIcon />\r\n                </IconButton>\r\n            </CardActions>\r\n            <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\r\n                <Typography variant=\"h5\" paragraph className={classes.comsCaption}>Comments:</Typography>\r\n                <CardContent className={classes.reverse}>\r\n\r\n                    {coms.map( ( item, i ) => renderComment( item.author, item.text, i ) )}\r\n\r\n                </CardContent>\r\n            </Collapse>\r\n        </Card>\r\n    );\r\n};\r\n\r\nexport default CommentsBlock;\r\n\r\nconst useStyles2 = makeStyles((theme) => ({\r\n    root: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        maxWidth: '100%',\r\n    },\r\n    input: {\r\n        marginLeft: theme.spacing(1),\r\n        flex: 1,\r\n    },\r\n    iconButton: {\r\n        padding: 10,\r\n    },\r\n    divider: {\r\n        height: 28,\r\n        margin: 4,\r\n    },\r\n}));\r\n\r\n\r\nconst CustomizedInputBase = ({ids, authorizedUserMail}) => {\r\n    const classes = useStyles2();\r\n    const valuePost = useRef(null);\r\n    const [textValue, setTextValue] = useState('');\r\n    const [alertShown, setAlertShown] = useState(false);\r\n\r\n    const sendValue = (e) => {\r\n        setTextValue(e.target.value);\r\n    };\r\n\r\n    const toggleAlert = (e) => {\r\n        setAlertShown(true);\r\n        setTimeout(setAlertShown, 1500, false);\r\n    };\r\n\r\n    const addComment = (id) => {\r\n\r\n        if (textValue.length !== 0) {\r\n            axios.post(\"http://localhost:4000/api/comments\", {\r\n                params: {\r\n                    id: id, mail: window.location.pathname.split(\"/\").slice(2)[0],\r\n                    userName: authorizedUserMail, userText: textValue\r\n                }\r\n            }).then(response => {\r\n                valuePost.current.value = '';\r\n                setTextValue('');\r\n                toggleAlert();\r\n                // axios.put(\"http://localhost:4000/api/newcomment/\", //working. but bad project structure\r\n                //     {params: {mail: window.location.pathname.split(\"/\").slice(2)[0], id: id}})\r\n                //     .then(response => {\r\n                //         let temp = response.data.posts.find(item => item.postComId === id).comments;\r\n                //\r\n                //         setCommentsList(temp)\r\n                //     });\r\n            });\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div>\r\n        {alertShown && <Alert severity=\"success\">Successfully added reload and check it out!</Alert>}\r\n        <Paper component=\"form\" className={classes.root}>\r\n\r\n            <IconButton disabled className={classes.iconButton} aria-label=\"menu\">\r\n                <AddComment />\r\n            </IconButton>\r\n\r\n            <InputBase innerRef={valuePost} value={textValue} onChange={sendValue}\r\n                        className={classes.input}\r\n                placeholder=\"Add Your Comment\"\r\n                inputProps={{ 'aria-label': 'Add' }}\r\n            />\r\n            <IconButton disabled type=\"button\" className={classes.iconButton} aria-label=\"search\">\r\n                <InsertEmoticon />\r\n            </IconButton>\r\n            <Divider className={classes.divider} orientation=\"vertical\" />\r\n            <IconButton color=\"primary\" className={classes.iconButton} aria-label=\"AddBox\" onClick={addComment.bind(this, ids)}>\r\n                <AddBox style={{color: 'green'}} />\r\n            </IconButton>\r\n        </Paper>\r\n        </div>\r\n    );\r\n};"]},"metadata":{},"sourceType":"module"}